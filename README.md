# NodeJS WebServer Sample

NodeJsにおける、Webサーバーのサンプルです。

とりあえずドキュメントルート以下のファイルを読みこんで表示するのと、404ページの表示くらいはサポートしています。

Webサーバーのサンプルであるとともに、Node.js採用プロジェクトで、簡単なサーバーが欲しい時とかに使うために作りました。(PWAとかServiceWorker使うとか)

## サーバー起動

```
npm run start
```

## サーバー情報

デフォルトは以下。

* URL
    * http://127.0.0.1:8080
* ドキュメントルート
    * docs/

## 設定

`config.json` にもろもろの設定があるので、それで設定可能。

### MIME Type

`config.json` のmimeに拡張子に対応するMIME Typeを追加できます。

```
{
	"docroot": "public",
	"port": 8080,
	"host": "127.0.0.1",
	"mime": {
		"png": "image/png",
		"txt": "text/plain"
	}
}
```

### 簡易SPA対応

`config.json` の `spa` にファイルを指定すると、SPAモードになります。

```
{
	spa: '/index.html'
}
```

SPAモード時に存在しないかつファイル拡張子がないURLにアクセスすると、spaにて指定したファイルのコンテンツが返されます。
上の例の場合、ドキュメントルートが `docs/` なので、 `docs/index.html` がSPAモードで返すファイルとなります。

#### 例：

* /index.html
* /test/index.md
    * ファイルが存在していればファイルのコンテンツを返す。
    * ファイルが存在していない場合、SPAモードであっても404を返す。（拡張子付き=ファイルアクセスと判定）
* /
* /test/
    * SPAモードでない場合はindex.htmlへのアクセスとするが、そうでない場合強制的にspaにて指定したファイルのコンテンツを返す。
* /test
* /test/hoge
    * ファイルが存在する場合はファイルのコンテンツを返す。
    * ファイルが存在していない場合、SPAモードの場合はspaにて指定したファイルのコンテンツを返す。

# 今後実装したい機能

今現在特になし。
あまり複雑にはしたくないので、そこまで機能を盛る気はない。
